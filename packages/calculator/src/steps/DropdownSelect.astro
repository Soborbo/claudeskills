---
/**
 * DropdownSelect - Dropdown with Auto-Advance
 *
 * Select dropdown that auto-advances on selection.
 */

export interface Props {
  /** Input name */
  name: string;
  /** Options */
  options: Array<{
    value: string;
    label: string;
    disabled?: boolean;
  }>;
  /** Selected value */
  value?: string;
  /** Placeholder text */
  placeholder?: string;
  /** Label */
  label?: string;
  /** Help text */
  help?: string;
  /** Required field */
  required?: boolean;
  /** Auto-advance on selection */
  autoAdvance?: boolean;
  /** Additional classes */
  class?: string;
}

const {
  name,
  options,
  value,
  placeholder = 'VÃ¡lassz...',
  label,
  help,
  required = false,
  autoAdvance = true,
  class: className,
} = Astro.props;
---

<div class:list={['dropdown-select', className]}>
  {label && (
    <label for={name} class="block text-sm font-medium text-gray-700 mb-2">
      {label}
      {required && <span class="text-red-500 ml-1">*</span>}
    </label>
  )}

  <div class="relative">
    <select
      id={name}
      name={name}
      required={required}
      data-calculator-select
      data-auto-advance={autoAdvance}
      class="block w-full px-4 py-3 pr-10 text-base border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none cursor-pointer"
    >
      <option value="" disabled selected={!value}>
        {placeholder}
      </option>
      {options.map((opt) => (
        <option
          value={opt.value}
          selected={opt.value === value}
          disabled={opt.disabled}
        >
          {opt.label}
        </option>
      ))}
    </select>

    {/* Dropdown arrow */}
    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
      <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </div>
  </div>

  {help && (
    <p class="mt-2 text-sm text-gray-500">{help}</p>
  )}
</div>
