# Internationalization (i18n)

## Structure

```
src/i18n/
├── ui.ts           # Type-safe translation helper
├── en.json         # English (default)
├── hu.json         # Hungarian
└── [lang].json     # Other languages
```

## Translation Files

```json
// src/i18n/en.json
{
  "nav": {
    "home": "Home",
    "services": "Services",
    "contact": "Contact"
  },
  "hero": {
    "title": "Your Headline Here",
    "cta": "Get Free Quote"
  },
  "footer": {
    "privacy": "Privacy Policy",
    "copyright": "© {year} {name}. All rights reserved."
  },
  "form": {
    "name": "Your Name",
    "email": "Email Address",
    "submit": "Send Message",
    "success": "Thank you! We'll be in touch.",
    "error": "Something went wrong. Please try again."
  }
}
```

## Translation Helper

```typescript
// src/i18n/ui.ts
import en from './en.json';
import hu from './hu.json';

const translations = { en, hu } as const;

export type Locale = keyof typeof translations;
export const defaultLocale: Locale = 'en';
export const locales = Object.keys(translations) as Locale[];

export function t(locale: Locale, key: string): string {
  const keys = key.split('.');
  let value: any = translations[locale];
  
  for (const k of keys) {
    value = value?.[k];
  }
  
  return value ?? translations[defaultLocale][keys.join('.')] ?? key;
}

export function getLocaleFromUrl(url: URL): Locale {
  const [, lang] = url.pathname.split('/');
  if (locales.includes(lang as Locale)) {
    return lang as Locale;
  }
  return defaultLocale;
}
```

## Page Structure

```
src/pages/
├── index.astro              # Default language (en)
├── privacy-policy.astro
├── hu/
│   ├── index.astro          # Hungarian homepage
│   └── adatvedelmi-nyilatkozat.astro
└── es/
    ├── index.astro
    └── politica-privacidad.astro
```

## Hreflang (Required)

Add to BaseLayout `<head>`:

```astro
---
import { locales, defaultLocale } from '@/i18n/ui';
import { site } from '@/config/site';

const currentPath = Astro.url.pathname;
const currentLocale = getLocaleFromUrl(Astro.url);

function getLocalizedPath(locale: string, path: string) {
  const cleanPath = path.replace(/^\/(en|hu|es)/, '');
  if (locale === defaultLocale) return cleanPath || '/';
  return `/${locale}${cleanPath || ''}`;
}
---

<!-- Hreflang tags -->
{locales.map(locale => (
  <link 
    rel="alternate" 
    hreflang={locale} 
    href={new URL(getLocalizedPath(locale, currentPath), Astro.site)} 
  />
))}
<link 
  rel="alternate" 
  hreflang="x-default" 
  href={new URL(getLocalizedPath(defaultLocale, currentPath), Astro.site)} 
/>
```

## Language Switcher

```astro
---
// src/components/common/LanguageSwitcher.astro
import { locales, getLocaleFromUrl } from '@/i18n/ui';

const currentLocale = getLocaleFromUrl(Astro.url);
const currentPath = Astro.url.pathname;

const languageNames: Record<string, string> = {
  en: 'English',
  hu: 'Magyar',
  es: 'Español',
};
---

<div class="language-switcher">
  {locales.map(locale => (
    <a 
      href={getLocalizedPath(locale, currentPath)}
      class:list={[
        'lang-link',
        { 'active': locale === currentLocale }
      ]}
      hreflang={locale}
    >
      {languageNames[locale]}
    </a>
  ))}
</div>
```

## Usage in Components

```astro
---
import { t, getLocaleFromUrl } from '@/i18n/ui';
const locale = getLocaleFromUrl(Astro.url);
---

<h1>{t(locale, 'hero.title')}</h1>
<button>{t(locale, 'hero.cta')}</button>
```
